{"version":3,"sources":["utils/compose.js","utils/format.js","components/ShopHeader/ShopHeader.jsx","components/BookListItem/BookListItem.jsx","components/Spinner/Spinner.jsx","components/ErrorIndicator/ErrorIndicator.jsx","components/BookStoreServiceContext/BookstoreServiceContext.js","components/hoc/index.js","components/hoc/withBookstoreService.js","redux/actions/book.js","redux/actions/cart.js","components/BookList/BookList.jsx","components/pages/HomePage.jsx","components/Cart/Cart.jsx","components/pages/CartPage.jsx","components/App/App.jsx","components/ErrorBoundary/ErrorBoundary.jsx","services/bookstoreService.js","redux/reducers/book.js","redux/reducers/cart.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["compose","funcs","comp","reduceRight","wrapped","f","numberFormat","Intl","NumberFormat","currencyFormat","minimumFractionDigits","maximumFractionDigits","getFormatedValue","value","type","format","ShopHeader","totalCount","totalPrice","className","to","BookListItem","book","onAddBookToCart","title","author","price","coverImage","src","alt","onClick","Spinner","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","fetchBooks","dispatch","getBooks","then","data","payload","catch","err","addBookToCart","BookList","books","map","id","BookListContainer","this","isLoading","error","Component","connect","ownProps","bindActionCreators","HomePage","mapDispatchToProps","onAddCartItem","bookId","onRemoveCartItem","onRemoveBookCartItems","cart","cartItems","item","idx","count","CartPage","role","path","component","exact","ErrorBoundary","state","hasError","setState","children","Promise","resolve","setTimeout","initialState","bookReducer","action","getTotalCount","arr","reduce","sum","geCartItems","newItem","itemIndex","newCartItems","slice","updateCartItems","cartReducer","findIndex","total","combineReducers","store","createStore","reducer","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.34657586.chunk.js","sourcesContent":["const compose = (...funcs) => (comp) => funcs.reduceRight(\n  (wrapped, f) => f(wrapped), comp,\n);\n\nexport default compose;\n","const numberFormat = new Intl.NumberFormat('en-US');\nconst currencyFormat = new Intl.NumberFormat('en-US', {\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nfunction getFormatedValue(value, type = 'number') {\n  if (type === 'number') {\n    return numberFormat.format(value);\n  }\n\n  if (type === 'currency') {\n    return currencyFormat.format(value);\n  }\n\n  return value;\n}\n\nexport default getFormatedValue;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { getFormatedValue } from '../../utils';\nimport './ShopHeader.css';\n\nconst ShopHeader = ({ totalCount, totalPrice }) => (\n  <header className=\"shop-header row\">\n    <Link to=\"/\">\n      <div className=\"logo text-dark\">BookStore</div>\n    </Link>\n    <Link to=\"/cart\">\n      <div className=\"shopping-cart\">\n        <i className=\"cart-icon fa fa-shopping-cart\" />\n        {totalCount} items (${getFormatedValue(totalPrice, 'currency')})\n      </div>\n    </Link>\n  </header>\n);\n\nexport default ShopHeader;\n","import React from 'react';\n\nimport './BookListItem.css';\n\nconst BookListItem = ({ book, onAddBookToCart }) => {\n  const {\n    title,\n    author,\n    price,\n    coverImage,\n  } = book;\n\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <span className=\"book-title\">{title}</span>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button className=\"btn btn-info add-to-cart\" onClick={onAddBookToCart}>\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import React from 'react';\n\nconst Spinner = () => <div>loading...</div>;\n\nexport default Spinner;\n","import React from 'react';\n\nimport './ErrorIndicator.css';\n\nconst ErrorIndicator = () => <div>Error!</div>;\n\nexport default ErrorIndicator;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer,\n} = React.createContext();\n\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\n","import withBookstoreService from './withBookstoreService';\n\nexport default withBookstoreService;\n","import React from 'react';\n\nimport { BookstoreServiceConsumer } from '../BookStoreServiceContext';\n\n// eslint-disable-next-line react/display-name\nconst withBookstoreService = () => (Wrapped) => (props) => (\n  <BookstoreServiceConsumer>\n    {(bookstoreService) => <Wrapped {...props} bookstoreService={bookstoreService} />}\n  </BookstoreServiceConsumer>\n);\n\nexport default withBookstoreService;\n","const booksRequest = () => ({\n  type: 'FETCH_BOOKS_REQUEST',\n});\n\nconst booksLoad = (newBooks) => ({\n  type: 'FETCH_BOOKS_SUCCESS',\n  payload: newBooks,\n});\n\nconst booksError = (error) => ({\n  type: 'FETCH_BOOKS_FAILURE',\n  payload: error,\n});\n\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\n  dispatch(booksRequest());\n  bookstoreService\n    .getBooks()\n    .then((data) => dispatch(booksLoad(data)))\n    .catch((err) => {\n      dispatch(booksError(err));\n    });\n};\n\nexport default fetchBooks;\n","const addBookToCart = (book) => ({\n  type: 'ADD_BOOK_TO_CART',\n  payload: book,\n});\n\nconst addCartItem = (bookId) => ({\n  type: 'ADD_CART_ITEM',\n  payload: bookId,\n});\n\nconst removeCartItem = (bookId) => ({\n  type: 'REMOVE_CART_ITEM',\n  payload: bookId,\n});\n\nconst removeBookCartItems = (bookId) => ({\n  type: 'REMOVE_BOOK_CART_ITEMS',\n  payload: bookId,\n});\n\nexport {\n  addBookToCart,\n  addCartItem,\n  removeCartItem,\n  removeBookCartItems,\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport BookListItem from '../BookListItem/BookListItem';\nimport Spinner from '../Spinner';\nimport ErrorIndicator from '../ErrorIndicator';\nimport withBookstoreService from '../hoc';\nimport { fetchBooks, addBookToCart } from '../../redux/actions';\nimport compose from '../../utils/compose';\nimport './BookList.css';\n\nconst BookList = ({ books, onAddBookToCart }) => (\n  <ul className=\"book-list\">\n    {books.map((book) => (\n      <li key={book.id}>\n        <BookListItem book={book} onAddBookToCart={() => onAddBookToCart(book)} />\n      </li>\n    ))}\n  </ul>\n);\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const {\n      books,\n      isLoading,\n      error,\n      onAddBookToCart,\n    } = this.props;\n\n    if (isLoading) {\n      return <Spinner />;\n    }\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n\n    return <BookList books={books} onAddBookToCart={onAddBookToCart} />;\n  }\n}\n\nconst mapStateToProps = ({ book: { books, isLoading, error } }) => ({\n  books,\n  isLoading,\n  error,\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  const { bookstoreService } = ownProps;\n  return bindActionCreators({\n    fetchBooks: fetchBooks(bookstoreService),\n    onAddBookToCart: addBookToCart,\n  }, dispatch);\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps),\n)(BookListContainer);\n","import React from 'react';\n\nimport BookList from '../BookList';\n\nconst HomePage = () => <BookList />;\n\nexport default HomePage;\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { addCartItem, removeCartItem, removeBookCartItems } from '../../redux/actions';\nimport { getFormatedValue } from '../../utils';\nimport './Cart.css';\n\nconst Cart = ({\n  cartItems,\n  totalPrice,\n  onAddCartItem,\n  onRemoveCartItem,\n  onRemoveBookCartItems,\n}) => {\n  const renderRow = (item, idx) => {\n    const {\n      id,\n      title,\n      price,\n      count,\n    } = item;\n\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${getFormatedValue(price * count, 'currency')}</td>\n        <td>\n          <button\n            onClick={() => onRemoveBookCartItems(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\"\n          >\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onAddCartItem(id)}\n            className=\"btn btn-outline-success btn-sm float-right\"\n          >\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onRemoveCartItem(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\"\n          >\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2 className=\"header\">Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n\n        <tbody>{cartItems.map(renderRow)}</tbody>\n      </table>\n\n      <div className=\"total\">Total: ${getFormatedValue(totalPrice, 'currency')}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ cart: { cartItems, totalPrice } }) => ({\n  cartItems,\n  totalPrice,\n});\n\nconst mapDispatchToProps = {\n  onAddCartItem: addCartItem,\n  onRemoveCartItem: removeCartItem,\n  onRemoveBookCartItems: removeBookCartItems,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);\n","import React from 'react';\n\nimport Cart from '../Cart';\n\nconst CartPage = () => <Cart />;\n\nexport default CartPage;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport ShopHeader from '../ShopHeader';\nimport { HomePage, CartPage } from '../pages';\n\nconst App = ({ totalCount, totalPrice }) => (\n  <main role=\"main\" className=\"container\">\n    <ShopHeader totalCount={totalCount} totalPrice={totalPrice} />\n    <Switch>\n      <Route path=\"/\" component={HomePage} exact />\n      <Route path=\"/book-store\" component={HomePage} exact />\n      <Route path=\"/cart\" component={CartPage} />\n    </Switch>\n  </main>\n);\n\nconst mapStateToProps = ({ cart: { totalCount, totalPrice } }) => ({\n  totalCount,\n  totalPrice,\n});\n\nexport default connect(mapStateToProps)(App);\n","import React, { Component } from 'react';\n\nimport ErrorIndicator from '../ErrorIndicator';\n\nexport default class ErrorBoundary extends Component {\n  state = {\n    hasError: false,\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n","const bookstoreService = {\n  data: [\n    {\n      id: 1,\n      title: 'The Road to React: Your journey to master plain yet pragmatic React.js',\n      author: 'Robin Wieruch',\n      price: 29.99,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/41JAb-hRu7L._SX384_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 2,\n      title: 'Professional JavaScript for Web Developers',\n      author: 'Matt Frisbie',\n      price: 30.49,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/51uEdt4fxnL._SX404_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 3,\n      title: 'Code Complete: A Practical Handbook of Software Construction, Second Edition',\n      author: 'Steve McConnell',\n      price: 25.41,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/51FUYfErOXL._SX408_BO1,204,203,200_.jpg',\n    },\n  ],\n\n  getBooks() {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve(this.data);\n        // imitation of errors\n        // if (Math.random() > 0.75) {\n        //   reject(new Error('Something bad happened'));\n        // } else {\n        //   resolve(this.data);\n        // }\n      }, 500);\n    });\n  },\n};\n\nexport default bookstoreService;\n","const initialState = {\n  books: [],\n  isLoading: true,\n  error: null,\n};\n\nconst bookReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        isLoading: true,\n        error: null,\n      };\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        isLoading: false,\n        error: null,\n      };\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        isLoading: false,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default bookReducer;\n","const initialState = {\n  cartItems: [],\n  totalPrice: 0,\n  totalCount: 0,\n};\n\nconst getTotalPrice = (arr) => arr.reduce((sum, item) => sum + item.price * item.count, 0);\nconst getTotalCount = (arr) => arr.reduce((sum, item) => sum + item.count, 0);\n\nconst updateCartItems = (cartItems, item, idx) => {\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\n\nconst geCartItems = (cartItems, newItem, itemIndex) => {\n  const newCartItems = updateCartItems(cartItems, newItem, itemIndex);\n\n  return {\n    cartItems: newCartItems,\n    totalPrice: getTotalPrice(newCartItems),\n    totalCount: getTotalCount(newCartItems),\n  };\n};\n\nconst cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_BOOK_TO_CART': {\n      const { cartItems } = state;\n      const { id, title, price } = action.payload;\n\n      const itemIndex = cartItems.findIndex((item) => item.id === id);\n\n      let newItem = {};\n      if (itemIndex === -1) {\n        newItem = {\n          id,\n          title,\n          price,\n          count: 1,\n        };\n      } else {\n        const item = cartItems[itemIndex];\n        newItem = {\n          ...item,\n          count: item.count + 1,\n        };\n      }\n\n      return geCartItems(cartItems, newItem, itemIndex);\n    }\n    case 'ADD_CART_ITEM': {\n      const { cartItems } = state;\n\n      const itemIndex = cartItems.findIndex((item) => item.id === action.payload);\n      const item = cartItems[itemIndex];\n\n      const newItem = {\n        ...item,\n        count: item.count + 1,\n        total: (item.count + 1) * item.price,\n      };\n\n      return geCartItems(cartItems, newItem, itemIndex);\n    }\n    case 'REMOVE_CART_ITEM': {\n      const { cartItems } = state;\n\n      const itemIndex = cartItems.findIndex((item) => item.id === action.payload);\n      const item = cartItems[itemIndex];\n\n      const newItem = {\n        ...item,\n        count: item.count - 1,\n      };\n\n      return geCartItems(cartItems, newItem, itemIndex);\n    }\n    case 'REMOVE_BOOK_CART_ITEMS': {\n      const { cartItems } = state;\n\n      const itemIndex = cartItems.findIndex((item) => item.id === action.payload);\n      const item = cartItems[itemIndex];\n\n      const newItem = {\n        ...item,\n        count: 0,\n      };\n\n      return geCartItems(cartItems, newItem, itemIndex);\n    }\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;\n","import { combineReducers } from 'redux';\nimport bookReducer from './book';\nimport cartReducer from './cart';\n\nexport default combineReducers({\n  book: bookReducer,\n  cart: cartReducer,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/App/App';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport bookstoreService from './services/bookstoreService';\nimport { BookstoreServiceProvider } from './components/BookStoreServiceContext';\n\nimport store from './redux/store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundary>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundary>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}